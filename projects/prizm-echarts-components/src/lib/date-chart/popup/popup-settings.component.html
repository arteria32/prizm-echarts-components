<ng-template #dialogContent>
  <div class="popup-body">
    <form [formGroup]="formGroup">
      <div formGroupName="legend" class="legend-container">
        <prizm-card>
          <prizm-panel header="Настройки легенды" />
          <div class="legend-form-content">
            Отображать
            <prizm-toggle formControlName="show" />
          </div>
        </prizm-card>
      </div>
      <div formGroupName="series" class="series-container">
        <div
          *ngFor="let series of seriesSettings$ | async; let i = index"
          class="series-item"
        >
          <prizm-card>
            <prizm-panel [header]="series.name?.toString() ?? '-'" />
            <div class="form-content" [formGroupName]="i">
              <div class="color-input-wrapper">
                <label for="lineStyleColor">Цвет линии</label>
                <input
                  prizmInput
                  type="color"
                  formControlName="lineStyleColor"
                />
              </div>
              <prizm-input-layout label="Тип линии">
                <prizm-input-select
                  formControlName="lineStyleType"
                  [stringify]="stringify"
                  [items]="lineStyleOptions"
                ></prizm-input-select>
              </prizm-input-layout>
              <prizm-input-layout label="Толщина линии">
                <input
                  prizmInput
                  #inputNumber="prizmInputNumber"
                  type="number"
                  formControlName="lineStyleWidth"
                  [min]="1"
                  [max]="10"
                  [step]="1"
                />
              </prizm-input-layout>

              <prizm-input-layout label="Маркер">
                <prizm-input-select
                  formControlName="symbolType"
                  [stringify]="stringify"
                  [items]="symbolOptions"
                ></prizm-input-select>
              </prizm-input-layout>
            </div>
          </prizm-card>
        </div>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #footerTemp let-completeWith="completeWith">
  <div class="box">
    <button
      (click)="completeWith(null)"
      prizmButton
      appearance="primary"
      size="xl"
    >
      Закрыть
    </button>
    <button
      (click)="completeWith(formGroup)"
      prizmButton
      appearance="primary"
      size="xl"
    >
      Сохранить
    </button>
  </div>
</ng-template>
