<ng-template #dialogContent>
  <div class="popup-body">
    <div class="container">
      <prizm-tabs [(activeTabIndex)]="activeTabIndex">
        <prizm-tab *ngFor="let item of tabs" [content]="item.title ?? ''" [type]="'line'"> </prizm-tab>
      </prizm-tabs>
    </div>
    
    <form [formGroup]="formGroup">
      <!-- Series Tab Content -->
      <ng-container *ngIf="activeTabIndex === 0">
        <div formGroupName="series" class="series-container">
          <div
            *ngFor="let series of seriesSettings$ | async; let i = index"
            class="series-item"
          >
            <prizm-card>
              <prizm-panel [header]="series.name?.toString() ?? '-'" />
              <div class="form-content" [formGroupName]="i">
                <div class="color-input-wrapper">
                  <label for="lineStyleColor">Цвет линии</label>
                  <input
                    type="color"
                    formControlName="lineStyleColor"
                  />
                </div>
                <prizm-input-layout label="Тип линии">
                  <prizm-input-select
                    formControlName="lineStyleType"
                    [stringify]="stringify"
                    [items]="lineStyleOptions"
                  ></prizm-input-select>
                </prizm-input-layout>
                <prizm-input-layout label="Толщина линии">
                  <input
                    prizmInput
                    #inputNumber="prizmInputNumber"
                    type="number"
                    formControlName="lineStyleWidth"
                    [min]="1"
                    [max]="10"
                    [step]="1"
                  />
                </prizm-input-layout>

                <prizm-input-layout label="Маркер">
                  <prizm-input-select
                    formControlName="symbolType"
                    [stringify]="stringify"
                    [items]="symbolOptions"
                  ></prizm-input-select>
                </prizm-input-layout>
              </div>
            </prizm-card>
          </div>
        </div>
      </ng-container>

      <!-- Y-Axis Tab Content -->
      <ng-container *ngIf="activeTabIndex === 1">
        <div formGroupName="yAxis" class="yaxis-container">
          <div
            *ngFor="let yAxis of yAxisSettings$ | async; let i = index"
            class="yaxis-item"
          >
            <prizm-card>
              <prizm-panel [header]="yAxis.name?.toString() ?? '-'" />
              <div class="form-content" [formGroupName]="i">
                <prizm-input-layout label="Нижний интервал (%)">
                  <input
                    prizmInput
                    #inputNumberStart="prizmInputNumber"
                    type="number"
                    formControlName="boundaryGapStart"
     
                    [step]="1"
                  />
                </prizm-input-layout>
                <prizm-input-layout label="Верхний интервал (%)">
                  <input
                    prizmInput
                    #inputNumberEnd="prizmInputNumber"
                    type="number"
                    formControlName="boundaryGapEnd"
         
                    [step]="1"
                  />
                </prizm-input-layout>
              </div>
            </prizm-card>
          </div>
        </div>
      </ng-container>

      <!-- Legend Tab Content -->
      <ng-container *ngIf="activeTabIndex === 2">
        <div formGroupName="legend" class="legend-container">
          <prizm-card>
            <prizm-panel header="Настройки легенды" />
            <div class="legend-form-content">
              Отображать
              <prizm-toggle formControlName="show" />
            </div>
          </prizm-card>
        </div>
      </ng-container>
    </form>
  </div>
</ng-template>

<ng-template #footerTemp let-completeWith="completeWith">
  <div class="box">
    <button
      (click)="completeWith(null)"
      prizmButton
      appearance="secondary"
      size="xl"
    >
      Закрыть
    </button>
    <button
      (click)="completeWith(formGroup)"
      prizmButton
      appearance="primary"
      size="xl"
    >
      Сохранить
    </button>
  </div>
</ng-template>
